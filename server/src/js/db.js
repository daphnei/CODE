// Generated by CoffeeScript 1.7.1
(function() {
  var Q, connection, mysql, withConnection;

  mysql = require('mysql');

  Q = require('Q');

  connection = mysql.createConnection({
    host: 'sql3.freemysqlhosting.net',
    user: 'sql330935',
    password: 'fW2!cZ8%',
    database: 'sql330935'
  });

  withConnection = function(fn) {
    connection.connect();
    fn();
    return connection.end();
  };

  exports.getFoodData = function(tableName) {
    var data;
    data = Q.defer();
    withConnection(function() {
      return connection.query('SELECT * FROM ??', [tableName], function(err, rows, fields) {
        if (err) {
          return data.reject(err);
        } else {
          return data.resolve(rows);
        }
      });
    });
    return data.promise;
  };

}).call(this);
